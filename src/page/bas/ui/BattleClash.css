/* Container เต็มจอ */
.battle-overlay {
  position: fixed;
  top: 0; left: 0; width: 100vw; height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  backdrop-filter: blur(5px);
  animation: fadeIn 0.3s ease-out;
}

/* พื้นที่สังเวียน */
.arena {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 80%;
  max-width: 800px;
  position: relative;
}

/* การ์ดทั่วไป */
.battle-card {
  width: 180px;
  height: 250px;
  background-size: cover;
  background-position: center;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
  border: 4px solid #fff;
}

/* ฝั่งโจมตี (ซ้ายไปขวา) */
.attacker {
  animation: attackMove 1s cubic-bezier(0.36, 0, 0.66, -0.56) forwards;
}

/* ฝั่งป้องกัน (ขวาไปซ้าย) */
.defender {
  animation: defendMove 1s cubic-bezier(0.36, 0, 0.66, -0.56) forwards;
}

/* เอฟเฟกต์ระเบิดตอนปะทะ */
.impact-flash {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 100px; height: 100px;
  background: white;
  border-radius: 50%;
  opacity: 0;
  box-shadow: 0 0 50px 50px white;
  animation: flashExplode 0.5s ease-out 0.8s forwards; /* เริ่มตอนชนกันพอดี */
}

/* Keyframes */
@keyframes attackMove {
  0% { transform: translateX(-200px) scale(0.8); opacity: 0; }
  20% { transform: translateX(0) scale(1); opacity: 1; }
  80% { transform: translateX(50px); } /* ถอยหลังนิดนึงเพื่อชาร์จ */
  100% { transform: translateX(200px) scale(1.2); } /* พุ่งชน */
}

@keyframes defendMove {
  0% { transform: translateX(200px) scale(0.8); opacity: 0; }
  20% { transform: translateX(0) scale(1); opacity: 1; }
  80% { transform: translateX(-50px); }
  100% { transform: translateX(-200px) scale(1.2); } /* ถูกชน */
}

@keyframes flashExplode {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  50% { opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(15); opacity: 0; }
}

/* การ์ดแตก (Shatter Effect) */
.shattered {
  animation: shatterCard 0.5s ease-out forwards;
}

@keyframes shatterCard {
  0% { transform: scale(1); opacity: 1; filter: brightness(100%); }
  50% { transform: scale(1.2) rotate(10deg); filter: brightness(200%); }
  100% { 
    transform: scale(1.5); 
    opacity: 0; 
    filter: blur(10px);
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); /* สามารถทำให้ซับซ้อนขึ้นได้ */
  }
}

.vs-text {
  position: absolute;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 80px;
  font-weight: bold;
  color: red;
  text-shadow: 0 0 10px black;
  font-family: 'Impact', sans-serif;
  z-index: 10;
}